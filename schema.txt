CREATE TABLE users (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, username TEXT UNIQUE NOT NULL, hash TEXT NOT NULL);

CREATE TABLE posts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    userid INTEGER NOT NULL,
    path TEXT,
    title TEXT NOT NULL,
    body TEXT NOT NULL,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (userid) REFERENCES users(id)
);
CREATE TABLE likes (
    userid INTEGER NOT NULL,
    postid INTEGER NOT NULL,
    FOREIGN KEY (userid) REFERENCES users(id),
    FOREIGN KEY (postid) REFERENCES posts(id)
);
CREATE TABLE comments (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    userid INTEGER NOT NULL,
    postid INTEGER NOT NULL,
    comment TEXT NOT NULL,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (userid) REFERENCES users(id),
    FOREIGN KEY (postid) REFERENCES posts(id)
);

-- CREATE TABLE IF NOT EXISTS "friends" (id INTEGER PRIMARY KEY AUTOINCREMENT, userid INTEGER NOT NULL, userid2 INTEGER NOT NULL, FOREIGN KEY (userid) REFERENCES users(id), FOREIGN KEY (userid2) REFERENCES users(id));
